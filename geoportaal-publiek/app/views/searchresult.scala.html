@(documents: java.util.List[com.querydsl.core.Tuple],
	sdf: java.text.SimpleDateFormat,
	textSearch: String,
	typesString: String,
	count: Integer,
	page: Integer,
	start: Integer,
	startPrevious: Integer,
	startNext: Integer,
	startLast: Integer,
	pageLast: Integer,
	expand: String
)

@import play.i18n._
@import play.mvc.Http
@import models.QDocument.document
@import models.QMdType.mdType

<div>
	<div class="data-navigation">
		<div class="row">
			<span class="col-md-3 count-page-line">@if(count == 0) {@Messages.get("result.count.label.zero")}
				@if(count == 1) {@count @Messages.get("result.count.label.one")} @if(count > 1) {
					@count @Messages.get("result.count.label.multiple")}@if(count > 0) {, pagina @page}</span>
			<div class="pull-right">
				<div class="form-group">
					<a href="@routes.Application.search(0, textSearch, typesString, false, expand)" class="link-as-button @if(start.equals(0)) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.first")
					</a>
					<a href="@routes.Application.search(startPrevious, textSearch, typesString, false, expand)" class="link-as-button @if(start.equals(0)) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.previous")
					</a>
					<a href="@routes.Application.search(startNext, textSearch, typesString, false, expand)" class="link-as-button @if(startNext >= count) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.next")
					</a>
					<a href="@routes.Application.search(startLast, textSearch, typesString, false, expand)" class="link-as-button @if(startNext >= count) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.last") (@pageLast)
					</a>
				</div>
			</div>
		</div>
	</div>
</div>

<div>
	@for(doc <- documents) {
		<div class="search-metadata" data-md-type="@doc.get(mdType.name)">
			<div class="row">
				<div class="col-md-12">
					<p class="title">
						<a class="md-title" data-uuid="@doc.get(document.uuid)">
							@doc.get(document.title) (@sdf.format(doc.get(document.date).getTime()), @doc.get(document.creator))@if("service".equals(doc.get(mdType.name))){@if("view".equals(doc.get(document.typeService))){ - WMS}@if("download".equals(doc.get(document.typeService))){ - WFS}}
						</a>
					</p>
				</div>
				<div class="col-md-12 description @if("true".equals(expand)) {expanded}" data-uuid="@doc.get(document.uuid)">
					<p>
						@if(doc.get(document.thumbnail) != null) {
							<img src="@doc.get(document.thumbnail)" class="md-thumbnail">
						}
						
						@if(doc.get(document.description).length > 460) {
							@doc.get(document.description).substring(0, 460)...
						} else {
							@doc.get(document.description)
						}
					</p>
					
					@views.html.metadatalink(doc.get(mdType.name), doc.get(document.uuid))
					@if("dataset".equals(doc.get(mdType.name)) && doc.get(document.downloadable).equals(true) && doc.get(document.published).equals(true) 
						&& "vector".equals(doc.get(document.spatialSchema))) {
						@views.html.downloadlink(doc.get(document.uuid))
					}
					@views.html.sourcexml(doc.get(mdType.name), doc.get(document.uuid))
				</div>
			</div>
		</div>
	}
</div>

<input type="hidden" id="js-page" value="search">
<input type="hidden" id="js-expand-value" value="@expand">