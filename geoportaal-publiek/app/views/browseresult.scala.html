@(subjects: java.util.List[com.querydsl.core.Tuple],
	documents: java.util.List[models.DocSubject],
	sdf: java.text.SimpleDateFormat,
	textSearch: String,
	subjectsString: String,
	count: Integer,
	page: Integer,
	start: Integer,
	startPrevious: Integer,
	startNext: Integer,
	startLast: Integer,
	pageLast: Integer,
	expand: String
)

@import play.i18n._
@import models.QSubject.subject
@import models.QSubjectLabel.subjectLabel

<div>
	<div class="data-navigation">
		<div class="row">
			<span class="col-md-3 count-page-line">@if(count == 0) {@Messages.get("result.count.label.zero")}
				@if(count == 1) {@count @Messages.get("result.count.label.one")} @if(count > 1) {
					@count @Messages.get("result.count.label.multiple")}@if(count > 0) {, pagina @page}</span>
			<div class="pull-right">
				<div class="form-group">
					<a href="@routes.Application.browse(0, textSearch, subjectsString, false, expand)" class="link-as-button @if(start.equals(0)) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.first")
					</a>
					<a href="@routes.Application.browse(startPrevious, textSearch, subjectsString, false, expand)" class="link-as-button @if(start.equals(0)) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.previous")
					</a>
					<a href="@routes.Application.browse(startNext, textSearch, subjectsString, false, expand)" class="link-as-button @if(startNext >= count) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.next")
					</a>
					<a href="@routes.Application.browse(startLast, textSearch, subjectsString, false, expand)" class="link-as-button @if(startNext >= count) {button-ovs-disabled}else{button-ovs}">
						@Messages.get("button.last") (@pageLast)
					</a>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row" id="header-subjects">
	<div>
		<span id="browse-info">@Messages.get("browse.subject.list.label")</span>
	</div>
</div>

<div class="row">
	<div class="col-md-4" id="subjects-list">
		<div id="subject-selection-buttons">
			<button class="button-ovs js-subject-select-all" type="button">@Messages.get("browse.button.select.all")</button>
			<button class="button-ovs js-subject-select-none" type="button">@Messages.get("browse.button.select.nothing")</button>
		</div>
		@for(subjectOne <- subjects) {
			<div>
				<label class="checkbox-inline">
					<input class="js-data-subject" data-md-subject="@subjectOne.get(subject.name)" type="checkbox" 
					@if(subjectsString.contains(subjectOne.get(subject.name))) {checked}>
					<span>@subjectOne.get(subjectLabel.title)</span>
				</label>
			</div>
		}
	</div>
	<div class="col-md-7" id="browse-area">
		@for(doc <- documents) {
			<div class="browse-metadata" 
				data-md-subject="@for(sub <- doc.getSubjects()) {@if(doc.getSubjects().indexOf(sub) == 0){@sub} else { @sub}}">
				<div class="row">
					<div class="col-md-12 browse-title">
						<p class="title">
							<a class="md-title" data-uuid="@doc.getUuid()">
								@doc.getTitle() (@sdf.format(doc.getDate().getTime()), @doc.getCreator())@if("service".equals(doc.getMetadataType)){@if("view".equals(doc.getTypeService)){ - WMS}@if("download".equals(doc.getTypeService)){ - WFS}}
							</a>
						</p>
					</div>
					<div class="col-md-12 description @if("true".equals(expand)) {expanded}"data-uuid="@doc.getUuid()">
						<p>
							@if(doc.getThumbnail() != null) {
								<img src="@doc.getThumbnail()" class="md-thumbnail">
							}
							
							@if(doc.getDescription().length > 460) {
								@doc.getDescription().substring(0, 460)...
							} else {
								@doc.getDescription()
							}
						</p>
						
						@views.html.metadatalink(doc.getMetadataType, doc.getUuid)
						@if("dataset".equals(doc.getMetadataType) && doc.getDownloadable.equals(true) && doc.getPublished.equals(true) && 
							"vector".equals(doc.getSpatialSchema)) {
							@views.html.downloadlink(doc.getUuid)
						}
						@views.html.sourcexml(doc.getMetadataType, doc.getUuid)
					</div>
				</div>
			</div>
		}
	</div>
</div>

<input type="hidden" id="js-page" value="browse">
<input type="hidden" id="js-expand-value" value="@expand">